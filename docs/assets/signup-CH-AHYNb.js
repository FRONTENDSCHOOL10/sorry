import"./style-BKCA0iKf.js";import{c as E}from"./pocketbase-CS1zegQ2.js";document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelector(".signup__userId"),s=document.querySelector(".signup__user__password"),a=document.querySelector(".signup__user__passwordConfirm"),c=document.querySelector(".signup__user__email"),u=document.querySelector(".signup__button"),l=document.querySelector(".agree__checkbox"),d=document.querySelector(".id__error"),m=document.querySelector(".pw__error");function f(e,t,r,n){e.addEventListener("focus",()=>{t.innerText=""}),e.addEventListener("blur",()=>{r(e.value)?t.innerText="":(t.innerText=n,t.style.color="#6b6b6b")}),e.addEventListener("input",i)}function v(e,t,r){t.innerText=r,t.style.color="#FF153C",e.value=""}function _(e){return/^[a-zA-Z0-9]{6,12}$/.test(e)}function p(e){return/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*])[A-Za-z\d~!@#$%^&*]{8,15}$/.test(e)}function g(e,t){return e===t}function w(e){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9]+\.[a-zA-Z]{2,}$/.test(e)}function y(e,t,r,n){return _(e)?p(t)?g(t,r)?w(n)?!0:(alert("올바른 이메일을 입력하세요."),!1):(alert("비밀번호가 일치하지 않습니다."),!1):(v(s,m,"비밀번호는 8~15자의 영문+숫자+특수문자(~!@#$%^&*)만 사용 가능합니다."),!1):(v(o,d,"아이디는 6~12자의 영문 또는 영문+숫자만 사용 가능합니다."),!1)}async function C(){const e=o.value,t=s.value,r=a.value,n=c.value;if(y(e,t,r,n))try{await E.collection("users").create({username:e,password:t,passwordConfirm:r,email:n}),alert("회원 가입이 완료되었습니다! 로그인 페이지로 이동합니다."),location.href="/src/pages/login/login"}catch(h){console.error("error : ",h),alert("동일한 이메일이 존재합니다."),o.value="",s.value="",c.value=""}}function i(){o.value&&s.value&&a.value&&c.value&&l.checked?u.classList.add("is--active"):u.classList.remove("is--active")}f(o,d,_,"영문 또는 영문, 숫자 조합 6~12자리"),f(s,m,p,"영문, 숫자, 특수문자(~!@#$%^&*) 조합 8~15자리"),l.addEventListener("change",i),u.addEventListener("click",C),i()});
